# Лабараторная работа 2

## Вариант sc-bag

* Студент: `Черемисова Мария Александровна`
* Группа:  `P3310`
* ИСУ: `409829`
* Язык: `Elixir`

---

# Bag (Multiset) на основе Separate Chaining Hashmap 

## Структура данных

Bag — это мультимножество, структура данных, в которой элементы могут встречаться несколько раз.  
Внутри структура реализована как Separate Chaining Hashmap:

- существует фиксированное количество бакетов;
- элемент попадает в бакет по хешу;
- каждый бакет хранит список пар вида `{элемент, количество}`;
- все операции работают за счёт хеш-таблицы и остаются эффективными.

Структура неизменяемая и полиморфная: Bag может хранить значения любого типа.

Поддерживаемые операции:

- создание: `empty`, `mempty`, `new`, `from_list`;
- изменение: `add`, `remove`;
- запросы: `count`, `member?`, `size`, `to_list`;
- функции высшего порядка: `map`, `filter`, `foldl`, `foldr`;
- моноид: операция `append` и элемент `empty`;
- сравнение: `equal?`, сравнивающее мультимножества по API, а не через списки.

## Тестирование

### Unit-тесты

Проверяют:

- корректность добавления и удаления элементов;
- правильность подсчёта кратностей;
- совпадение общего количества элементов и суммы count;
- корректность преобразования в список;
- корректность `map`, `filter`, `foldl`, `foldr`;
- свойства моноида (`append`, `empty`);
- корректную работу `equal?`.

### Property-based тесты

Используется библиотека StreamData.  
Проверяются свойства, которые должны выполняться для любых входных данных:

1. `from_list(to_list(bag))` возвращает эквивалентный bag.  
2. `size(bag)` равен длине списка `to_list(bag)`.  
3. `count(bag, x)` равен количеству `x` в исходном списке.  
4. Законы моноида:
   - `empty` — нейтральный элемент,
   - `append` — ассоциативна.

Property-based тесты автоматически генерируют множество случайных данных и проверяют, что структура работает корректно не только в частных случаях, но и в общем.
